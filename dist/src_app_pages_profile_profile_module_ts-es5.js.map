{"version":3,"sources":["webpack:///src/app/pages/profile/add-profile/add-profile.component.html","webpack:///src/app/pages/profile/add-profile/add-profile.component.ts","webpack:///src/app/pages/profile/profile.module.ts","webpack:///src/app/pages/profile/profile.routing.module.ts","webpack:///src/app/pages/profile/profile/profile.component.ts","webpack:///src/app/pages/profile/profile/profile.component.html"],"names":["AddProfileComponent","profileService","apollo","nbToastr","nbDialog","addProfile","FormGroup","username","FormControl","Validators","firstName","lastName","email","phone","password","address","role","roles","open","ConfirmationModalComponent","context","data","onClose","subscribe","cl","console","log","value","mutate","mutation","success","reset","warning","saveProfile","ProfileModule","CommonModule","ProfileRoutingModule","NbSelectModule","NbCardModule","NbInputModule","NbIconModule","ReactiveFormsModule","NbRadioModule","NbButtonModule","Ng2SmartTableModule","ProfileComponent","routes","path","component","RouterModule","datePipe","settings","actions","add","edit","addButtonContent","createButtonContent","cancelButtonContent","editButtonContent","saveButtonContent","confirmSave","deleteButtonContent","confirmDelete","columns","title","type","editable","createdAt","valuePrepareFunction","date","raw","Date","formatted","transform","updatedAt","listOfProfile","query","getListProfile","profileList","LocalDataSource","getAllProfiles","event","_id","deleteProfile","danger","confirm","resolve","updateProfile","newData","info","newdata"],"mappings":"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","file":"src_app_pages_profile_profile_module_ts-es5.js","sourcesContent":["<nb-card>\n  <nb-card-header>Ajouter STAFF</nb-card-header>\n  <nb-card-body>\n    <form [formGroup]=\"addProfile\">\n      <div class=\"row\">\n        <div class=\"col-lg-6\">\n          <label class=\"label\">Nom d'utilisateur</label>\n          <input nbInput fullWidth formControlName=\"username\" />\n        </div>\n        <div class=\"col-lg-6\">\n          <label class=\"label\">Pr√©nom</label>\n          <input nbInput fullWidth formControlName=\"firstName\" />\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-lg-6\">\n          <label class=\"label\">Nom</label>\n          <input nbInput fullWidth formControlName=\"lastName\" />\n        </div>\n        <div class=\"col-lg-6\">\n          <label class=\"label\">E-mail</label>\n          <input nbInput fullWidth formControlName=\"email\" />\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-lg-6\">\n          <label class=\"label\">T√©l√©phone</label>\n          <input nbInput fullWidth formControlName=\"phone\" />\n        </div>\n        <div class=\"col-lg-6\">\n          <label class=\"label\">Mot de passe</label>\n          <input nbInput type=\"password\" fullWidth formControlName=\"password\" />\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-lg-6\">\n          <label class=\"label\">Adresse</label>\n          <input nbInput fullWidth formControlName=\"address\" />\n        </div>\n        <div class=\"col-lg-6\">\n          <label class=\"label\">Role</label>\n          <nb-select fullWidth formControlName=\"role\">\n            <nb-option *ngFor=\"let r of roles\" [value]=\"r\">\n              {{ r }}\n            </nb-option>\n          </nb-select>\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"justify-btn\">\n          <button\n            nbButton\n            status=\"success\"\n            [disabled]=\"addProfile.invalid\"\n            (click)=\"saveProfile()\"\n          >\n            Valider\n          </button>\n          <button nbButton status=\"danger\" (click)=\"addProfile.reset()\">\n            Vider les champs\n          </button>\n        </div>\n      </div>\n    </form>\n  </nb-card-body>\n</nb-card>\n","import { Component, OnInit } from \"@angular/core\";\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { ProfileService } from \"../profile.service\";\nimport { Apollo } from \"apollo-angular\";\nimport { NbDialogService, NbToastrService } from \"@nebular/theme\";\nimport { ConfirmationModalComponent } from \"../../../share-data/confirmation-modal/confirmation-modal.component\";\n\n@Component({\n  selector: \"ngx-add-profile\",\n  templateUrl: \"./add-profile.component.html\",\n  styleUrls: [\"./add-profile.component.scss\"],\n})\nexport class AddProfileComponent implements OnInit {\n  addProfile = new FormGroup({\n    username: new FormControl(\"\", [Validators.required]),\n    firstName: new FormControl(\"\", [Validators.required]),\n    lastName: new FormControl(\"\", [Validators.required]),\n    email: new FormControl(\"\", [Validators.required, Validators.email]),\n    phone: new FormControl(\"\", [Validators.required]),\n    password: new FormControl(\"\", [\n      Validators.required,\n      Validators.minLength(6),\n    ]),\n    address: new FormControl(\"\", [Validators.required]),\n    role: new FormControl(\"\", [Validators.required]),\n  });\n\n  roles = [\n    \"ADMIN_MANAGER\",\n    \"ADMIN_TECH\",\n    \"MANAGER\",\n    \"MAGASIN\",\n    \"TECH\",\n    \"COORDINATOR\",\n  ];\n\n  constructor(\n    private profileService: ProfileService,\n    private apollo: Apollo,\n    private nbToastr: NbToastrService,\n    private nbDialog: NbDialogService\n  ) {}\n\n  ngOnInit(): void {}\n\n  saveProfile() {\n    this.nbDialog\n      .open(ConfirmationModalComponent, {\n        context: { data: \"√™tes-vous s√ªr ?\" },\n      })\n      .onClose.subscribe((cl) => {\n        if (cl) {\n          console.log(this.addProfile.value, \"form\");\n          this.apollo\n            .mutate<any>({\n              mutation: this.profileService.addProfile(this.addProfile.value),\n            })\n            .subscribe(({ data }) => {\n              console.log(data, \"profile added\");\n              if (data) {\n                this.nbToastr.success(\"\", \"Profile added\");\n                this.addProfile.reset();\n              }\n            });\n        } else {\n          this.nbToastr.warning(\"\", \"Annul√©\");\n          this.addProfile.reset();\n        }\n      });\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { ProfileComponent } from \"./profile/profile.component\";\nimport { AddProfileComponent } from \"./add-profile/add-profile.component\";\nimport { ProfileRoutingModule } from \"./profile.routing.module\";\nimport { ReactiveFormsModule } from \"@angular/forms\";\nimport {\n  NbSelectModule,\n  NbCardModule,\n  NbInputModule,\n  NbRadioModule,\n  NbButtonModule,\n  NbIconModule,\n} from \"@nebular/theme\";\nimport { Ng2SmartTableModule } from \"ng2-smart-table\";\n\n@NgModule({\n  declarations: [ProfileComponent, AddProfileComponent],\n  imports: [\n    CommonModule,\n    ProfileRoutingModule,\n    NbSelectModule,\n    CommonModule,\n\n    NbCardModule,\n    NbInputModule,\n    NbIconModule,\n    ReactiveFormsModule,\n    NbRadioModule,\n    NbButtonModule,\n    Ng2SmartTableModule,\n  ],\n})\nexport class ProfileModule {}\n","import { NgModule } from \"@angular/core\";\r\nimport { RouterModule, Routes } from \"@angular/router\";\r\nimport { AddProfileComponent } from \"./add-profile/add-profile.component\";\r\nimport { ProfileComponent } from \"./profile/profile.component\";\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: \"add-profile\",\r\n    component: AddProfileComponent,\r\n  },\r\n  {\r\n    path: \"list-profile\",\r\n    component: ProfileComponent,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ProfileRoutingModule {}\r\n","import { Component, OnInit } from \"@angular/core\";\nimport { Apollo } from \"apollo-angular\";\nimport { LocalDataSource } from \"ng2-smart-table\";\nimport { ProfileService } from \"../profile.service\";\nimport { DatePipe } from \"@angular/common\";\nimport { NbTokenService } from \"@nebular/auth\";\nimport { NbDialogService, NbToastrService } from \"@nebular/theme\";\nimport { ConfirmationModalComponent } from \"../../../share-data/confirmation-modal/confirmation-modal.component\";\n\n@Component({\n  selector: \"ngx-profile\",\n  templateUrl: \"./profile.component.html\",\n  styleUrls: [\"./profile.component.scss\"],\n})\nexport class ProfileComponent implements OnInit {\n  settings = {\n    actions: {\n      add: false,\n      edit: true,\n      delete: true,\n      // custom: [\n      //   {\n      //     name: \"passValue\",\n      //     title: `<i class=\"nb-compose\" title=\"details\"></i>`,\n      //   },\n      // ],\n    },\n    add: {\n      addButtonContent: '<i class=\"nb-plus\"></i>',\n      createButtonContent: '<i class=\"nb-checkmark\"></i>',\n      cancelButtonContent: '<i class=\"nb-close\"></i>',\n    },\n    edit: {\n      editButtonContent: '<i class=\"nb-edit\"  title=\"Modifier\" ></i>',\n      saveButtonContent: '<i class=\"nb-checkmark\"></i>',\n      cancelButtonContent: '<i class=\"nb-close\"></i>',\n      confirmSave: true,\n    },\n    delete: {\n      deleteButtonContent: '<i class=\"nb-trash\"  title=\"Desactiver\"></i>',\n      confirmDelete: true,\n    },\n    columns: {\n      username: {\n        title: \"Nom d'utilisateur\",\n        type: \"string\",\n        editable: false,\n      },\n\n      firstName: {\n        title: \"Pr√©nom\",\n        type: \"string\",\n      },\n      lastName: {\n        title: \"Nom\",\n        type: \"string\",\n      },\n      role: {\n        title: \"R√¥le\",\n        type: \"string\",\n        editable: false,\n      },\n      email: {\n        title: \"E-mail\",\n        type: \"string\",\n        editable: false,\n      },\n      phone: {\n        title: \"T√©l√©phone\",\n        type: \"string\",\n      },\n\n      createdAt: {\n        title: \"Cr√©√© le\",\n        type: \"string\",\n        valuePrepareFunction: (date) => {\n          var raw = new Date(date);\n\n          var formatted = this.datePipe.transform(raw, \"dd MMM yyyy hh:mm:ss\");\n          return formatted;\n        },\n        editable: false,\n      },\n\n      updatedAt: {\n        title: \"D√©rniere modification\",\n        type: \"string\",\n        valuePrepareFunction: (date) => {\n          var raw = new Date(date);\n\n          var formatted = this.datePipe.transform(raw, \"dd MMM yyyy hh:mm:ss\");\n          return formatted;\n        },\n        editable: false,\n      },\n    },\n  };\n\n  profileList: LocalDataSource;\n\n  constructor(\n    private profileService: ProfileService,\n    private apollo: Apollo,\n    private datePipe: DatePipe,\n    private nbToastr: NbToastrService,\n    private nbDialog: NbDialogService\n  ) {}\n\n  ngOnInit(): void {\n    this.listOfProfile();\n  }\n\n  listOfProfile() {\n    this.apollo\n      .query<any>({\n        query: this.profileService.getListProfile(),\n      })\n      .subscribe(({ data }) => {\n        console.log(data, \"data\");\n\n        this.profileList = new LocalDataSource(data.getAllProfiles);\n      });\n  }\n  delete(event) {\n    this.nbDialog\n      .open(ConfirmationModalComponent, {\n        context: { data: \"Vous-√™tes s√ªr de supprimer ?\" },\n      })\n      .onClose.subscribe((cl) => {\n        if (cl) {\n          console.log(\"hello\", event.data._id);\n          this.apollo\n            .mutate<any>({\n              mutation: this.profileService.deleteProfile(event.data._id),\n            })\n            .subscribe(({ data }) => {\n              console.log(data, \"delete\");\n              if (data) {\n                this.nbToastr.danger(\"\", \"Profil supprim√©\");\n                event.confirm.resolve();\n              }\n            });\n        } else {\n          this.nbToastr.danger(\"\", \"Annul√©\");\n        }\n      });\n  }\n  edit(event) {\n    this.nbDialog\n      .open(ConfirmationModalComponent, {\n        context: { data: \"√™tes-vous s√ªr de modifier ?\" },\n      })\n      .onClose.subscribe((cl) => {\n        if (cl) {\n          this.apollo\n            .mutate<any>({\n              mutation: this.profileService.updateProfile(\n                event.newData._id,\n                event.newData.firstName,\n                event.newData.lastName,\n                event.newData.phone\n              ),\n            })\n            .subscribe(({ data }) => {\n              console.log(data, \"updated\");\n              if (data) {\n                this.nbToastr.info(\"\", \"Profil mis √† jour\");\n                event.confirm.resolve(event.newdata);\n              }\n            });\n        } else {\n          this.nbToastr.danger(\"\", \"Annul√©\");\n        }\n      });\n    console.log(\"hello\", event);\n  }\n}\n","<nb-card>\n  <nb-card-header></nb-card-header>\n  <nb-card-body>\n    <ng2-smart-table\n      class=\"order-table\"\n      [settings]=\"settings\"\n      [source]=\"profileList\"\n      (deleteConfirm)=\"delete($event)\"\n      (editConfirm)=\"edit($event)\"\n    ></ng2-smart-table>\n  </nb-card-body>\n</nb-card>\n"]}