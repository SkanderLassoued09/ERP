<h1 id="title" class="title">Connexion</h1>
<p class="sub-title">Salut! Connectez-vous avec votre username.</p>

<form (ngSubmit)="login()" [formGroup]="loginForm">
  <div class="form-control-group">
    <label class="label" for="input-username">username</label>
    <input
      nbInput
      fullWidth
      formControlName="username"
      name="username"
      id="input-username"
      placeholder="username"
      fieldSize="large"
      [status]="
        loginForm.get('username').dirty
          ? loginForm.get('username').invalid
            ? 'danger'
            : 'success'
          : 'basic'
      "
      [attr.aria-invalid]="
        loginForm.get('username').invalid && loginForm.get('username').touched
          ? true
          : null
      "
    />
    <ng-container
      *ngIf="
        loginForm.get('username').invalid && loginForm.get('username').touched
      "
    >
      <p
        class="caption status-danger"
        *ngIf="loginForm.get('username').errors?.required"
      >
        username is required!
      </p>
      <p
        class="caption status-danger"
        *ngIf="loginForm.get('username').errors?.pattern"
      >
        username should be the real one!
      </p>
    </ng-container>
  </div>

  <div class="form-control-group">
    <span class="label-with-link">
      <label class="label" for="input-password">Password:</label>
      <a class="forgot-password caption-2" routerLink="../request-password"
        >Forgot Password?</a
      >
    </span>
    <input
      nbInput
      fullWidth
      formControlName="password"
      name="password"
      type="password"
      id="input-password"
      placeholder="Password"
      fieldSize="large"
      [status]="
        loginForm.get('password').dirty
          ? loginForm.get('password').invalid
            ? 'danger'
            : 'success'
          : 'basic'
      "
      [attr.aria-invalid]="
        loginForm.get('password').invalid && loginForm.get('password').touched
          ? true
          : null
      "
    />
    <ng-container
      *ngIf="
        loginForm.get('password').invalid && loginForm.get('password').touched
      "
    >
      <p
        class="caption status-danger"
        *ngIf="loginForm.get('password').errors?.required"
      >
        Password is required!
      </p>
      <p
        class="caption status-danger"
        *ngIf="
          loginForm.get('password').errors?.minlength ||
          loginForm.get('password').errors?.maxlength
        "
      >
        Password invalid
      </p>
    </ng-container>
  </div>

  <button
    nbButton
    fullWidth
    status="primary"
    size="large"
    [disabled]="loginForm.invalid"
  >
    Log In
  </button>
</form>
